#include "magic_generator.h"

int main(int argc, char* argv[])
{
    if (argc == 1)
    {
        std::cout << "Unkonw piece type to generate" << std::endl;
        return 0;
    }
    MagicGenerator mg;
    std::string piece = argv[1];
    if (piece == "r" || piece == "R")
        mg.PrintMagicArray<PieceType::ROOK>();
    else if (piece == "c" || piece == "C")
        mg.PrintMagicArray<PieceType::CANNON>();
    else if (piece == "n" || piece == "N")
        mg.PrintMagicArray<PieceType::KNIGHT>();
    else
        std::cout << "Unkonw piece type to generate" << std::endl;
    return 0;
}

// Generated magic
constexpr Bitboard RookMagic[SQ_NUM] =
{
    (Bitboard(0x80400050040005c0ULL) << 64) | Bitboard(0x1044100004000001ULL),
    (Bitboard(0x4920000800a10000ULL) << 64) | Bitboard(0xa0010200010e0a01ULL),
    (Bitboard(0x2480009210096080ULL) << 64) | Bitboard(0x40040001106000ULL),
    (Bitboard(0x80004900202400ULL) << 64) | Bitboard(0x4010001080000010ULL),
    (Bitboard(0x280020000404400ULL) << 64) | Bitboard(0x222080880fa0020ULL),
    (Bitboard(0x180020110002000ULL) << 64) | Bitboard(0x42440802000004cULL),
    (Bitboard(0x900003080128800ULL) << 64) | Bitboard(0x1000810080404420ULL),
    (Bitboard(0x4100021840042014ULL) << 64) | Bitboard(0x80290004c000ULL),
    (Bitboard(0x40001212080002ULL) << 64) | Bitboard(0x8080008609a00090ULL),
    (Bitboard(0x200020000c000021ULL) << 64) | Bitboard(0x520080720080021ULL),
    (Bitboard(0x3c3900004208012ULL) << 64) | Bitboard(0x1060008000402a00ULL),
    (Bitboard(0x802000a2000200ULL) << 64) | Bitboard(0x9010000801000230ULL),
    (Bitboard(0x40200040800200ULL) << 64) | Bitboard(0x88100000a1084080ULL),
    (Bitboard(0x510800200805800ULL) << 64) | Bitboard(0x4002020020c01040ULL),
    (Bitboard(0xd4008000409a80a0ULL) << 64) | Bitboard(0x4803001060400080ULL),
    (Bitboard(0x200600110040044ULL) << 64) | Bitboard(0xa000030042000ULL),
    (Bitboard(0x2005400010000800ULL) << 64) | Bitboard(0x408a001404801040ULL),
    (Bitboard(0x800800004008200ULL) << 64) | Bitboard(0x42008500b11260c0ULL),
    (Bitboard(0x10041000440080ULL) << 64) | Bitboard(0x8000040220200000ULL),
    (Bitboard(0x40100800006180ULL) << 64) | Bitboard(0x90000809080201ULL),
    (Bitboard(0x201001000010ULL) << 64) | Bitboard(0x9020004840000428ULL),
    (Bitboard(0x2402012000880380ULL) << 64) | Bitboard(0x2000010089308020ULL),
    (Bitboard(0x6a085000204001ULL) << 64) | Bitboard(0x44000035100005ULL),
    (Bitboard(0x12000800100002ULL) << 64) | Bitboard(0x8006000200000600ULL),
    (Bitboard(0xa020210004108020ULL) << 64) | Bitboard(0x4002004100000488ULL),
    (Bitboard(0x101048000040990ULL) << 64) | Bitboard(0x1202840001000080ULL),
    (Bitboard(0x100004000201401ULL) << 64) | Bitboard(0x41100c002c4210ULL),
    (Bitboard(0x6051221018001081ULL) << 64) | Bitboard(0x2040001019003800ULL),
    (Bitboard(0x8000680084004100ULL) << 64) | Bitboard(0x50000000000040ULL),
    (Bitboard(0xc00011008004080ULL) << 64) | Bitboard(0x10000040008106ULL),
    (Bitboard(0x8007011008008000ULL) << 64) | Bitboard(0x1000010005000444ULL),
    (Bitboard(0x4010008004000ULL) << 64) | Bitboard(0xc280010002109000ULL),
    (Bitboard(0x40c00010004008ULL) << 64) | Bitboard(0x1a44000402000022ULL),
    (Bitboard(0x100800420002020ULL) << 64) | Bitboard(0x48a024010088020ULL),
    (Bitboard(0x400010000220ULL) << 64) | Bitboard(0x8200010798000110ULL),
    (Bitboard(0x6004400520000040ULL) << 64) | Bitboard(0x810141000021c913ULL),
    (Bitboard(0x12053a0481040001ULL) << 64) | Bitboard(0x140004010200888ULL),
    (Bitboard(0x8802100200020000ULL) << 64) | Bitboard(0x102000030304c100ULL),
    (Bitboard(0x200400040028ULL) << 64) | Bitboard(0x20000620000082a0ULL),
    (Bitboard(0x4211010200040019ULL) << 64) | Bitboard(0x18000000000000ULL),
    (Bitboard(0x1000038100040010ULL) << 64) | Bitboard(0x1400000064000ULL),
    (Bitboard(0x809000500200210ULL) << 64) | Bitboard(0x20080042260040ULL),
    (Bitboard(0x500200410140004ULL) << 64) | Bitboard(0x200000600c012ULL),
    (Bitboard(0x1200002004600041ULL) << 64) | Bitboard(0x208020000105020ULL),
    (Bitboard(0x80188050100001ULL) << 64) | Bitboard(0x890101080000a04ULL),
    (Bitboard(0x88880002c200ULL) << 64) | Bitboard(0x11406100000024ULL),
    (Bitboard(0x8c0080085000300ULL) << 64) | Bitboard(0x18200000000804ULL),
    (Bitboard(0x21880001000200ULL) << 64) | Bitboard(0x1044401008080008ULL),
    (Bitboard(0x48000808800100ULL) << 64) | Bitboard(0x484000040080001ULL),
    (Bitboard(0x200040800200ULL) << 64) | Bitboard(0x800008008220416ULL),
    (Bitboard(0x21400080020400ULL) << 64) | Bitboard(0x401040008200e40ULL),
    (Bitboard(0x20222004a0002200ULL) << 64) | Bitboard(0x702000950040042ULL),
    (Bitboard(0x800040020800ULL) << 64) | Bitboard(0x84004000200260ULL),
    (Bitboard(0x101021005090800ULL) << 64) | Bitboard(0x41810200000008ULL),
    (Bitboard(0x200008008100cfULL) << 64) | Bitboard(0x40a810003000ULL),
    (Bitboard(0x100048400020001ULL) << 64) | Bitboard(0x8c01208248024ULL),
    (Bitboard(0x240c0000410001ULL) << 64) | Bitboard(0x8400400200440ULL),
    (Bitboard(0x8400110408002ULL) << 64) | Bitboard(0x6100004800020ULL),
    (Bitboard(0x81080c900180000dULL) << 64) | Bitboard(0x4000020005580ULL),
    (Bitboard(0xa10400100101002ULL) << 64) | Bitboard(0x400080200021cULL),
    (Bitboard(0x6004400040002002ULL) << 64) | Bitboard(0x408c44044400ULL),
    (Bitboard(0x698600114700005ULL) << 64) | Bitboard(0x8004a2000000ULL),
    (Bitboard(0x10810c808808414ULL) << 64) | Bitboard(0x2000801800100ULL),
    (Bitboard(0xc0085228020008ULL) << 64) | Bitboard(0x1080000003000000ULL),
    (Bitboard(0x40091400008a0880ULL) << 64) | Bitboard(0x40000000000c20ULL),
    (Bitboard(0x8000420400020ULL) << 64) | Bitboard(0x20008040000000ULL),
    (Bitboard(0x401840000801400ULL) << 64) | Bitboard(0x4100020230440109ULL),
    (Bitboard(0x20201100001010ULL) << 64) | Bitboard(0x80008080000002ULL),
    (Bitboard(0x200140012000ULL) << 64) | Bitboard(0x280004000080200ULL),
    (Bitboard(0x4040014000022cULL) << 64) | Bitboard(0x900020d00000080ULL),
    (Bitboard(0xa218400020000101ULL) << 64) | Bitboard(0x4100010420041000ULL),
    (Bitboard(0x2000002004041044ULL) << 64) | Bitboard(0x420003000c010000ULL),
    (Bitboard(0x60000a204100ULL) << 64) | Bitboard(0x10400002001001ULL),
    (Bitboard(0x2000840108080780ULL) << 64) | Bitboard(0x8000800080000082ULL),
    (Bitboard(0x8411010400208000ULL) << 64) | Bitboard(0x1080400000220020ULL),
    (Bitboard(0x4c0000a10000a203ULL) << 64) | Bitboard(0x6000400040200023ULL),
    (Bitboard(0x1800282021320ULL) << 64) | Bitboard(0x2049000100804000ULL),
    (Bitboard(0x10c00104400108ULL) << 64) | Bitboard(0x6e00800090280100ULL),
    (Bitboard(0x201200020008408ULL) << 64) | Bitboard(0x124000800100b2ULL),
    (Bitboard(0x1880004009800110ULL) << 64) | Bitboard(0x112000022004000ULL),
    (Bitboard(0xa802000100022c0ULL) << 64) | Bitboard(0x40404000083091a2ULL),
    (Bitboard(0x440000284000521ULL) << 64) | Bitboard(0xa02000b000200010ULL),
    (Bitboard(0x4100100010408000ULL) << 64) | Bitboard(0x4000245000800011ULL),
    (Bitboard(0xc400020800480080ULL) << 64) | Bitboard(0x110414000000000ULL),
    (Bitboard(0x424c8081000004ULL) << 64) | Bitboard(0x9000402000100000ULL),
    (Bitboard(0x48983100002000ULL) << 64) | Bitboard(0x480016000080180ULL),
    (Bitboard(0x84002008a0400002ULL) << 64) | Bitboard(0x40004a000008008ULL),
    (Bitboard(0x2000c0004184ULL) << 64) | Bitboard(0x802000000208ULL),
    (Bitboard(0x806044080014001ULL) << 64) | Bitboard(0x441850000800020ULL),
    (Bitboard(0x24b0880a10040102ULL) << 64) | Bitboard(0x42ba018000000b00ULL),
};

constexpr Bitboard CannonMagic[SQ_NUM] =
{
    (Bitboard(0x80400050040005c0ULL) << 64) | Bitboard(0x1044100004000001ULL),
    (Bitboard(0x4920000800a10000ULL) << 64) | Bitboard(0xa0010200010e0a01ULL),
    (Bitboard(0x2480009210096080ULL) << 64) | Bitboard(0x40040001106000ULL),
    (Bitboard(0x80004900202400ULL) << 64) | Bitboard(0x4010001080000010ULL),
    (Bitboard(0x280020000404400ULL) << 64) | Bitboard(0x222080880fa0020ULL),
    (Bitboard(0x180020110002000ULL) << 64) | Bitboard(0x42440802000004cULL),
    (Bitboard(0x900003080128800ULL) << 64) | Bitboard(0x1000810080404420ULL),
    (Bitboard(0x4100021840042014ULL) << 64) | Bitboard(0x80290004c000ULL),
    (Bitboard(0x40001212080002ULL) << 64) | Bitboard(0x8080008609a00090ULL),
    (Bitboard(0x200020000c000021ULL) << 64) | Bitboard(0x520080720080021ULL),
    (Bitboard(0x3c3900004208012ULL) << 64) | Bitboard(0x1060008000402a00ULL),
    (Bitboard(0x802000a2000200ULL) << 64) | Bitboard(0x9010000801000230ULL),
    (Bitboard(0x40200040800200ULL) << 64) | Bitboard(0x88100000a1084080ULL),
    (Bitboard(0x510800200805800ULL) << 64) | Bitboard(0x4002020020c01040ULL),
    (Bitboard(0xd4008000409a80a0ULL) << 64) | Bitboard(0x4803001060400080ULL),
    (Bitboard(0x200600110040044ULL) << 64) | Bitboard(0xa000030042000ULL),
    (Bitboard(0x2005400010000800ULL) << 64) | Bitboard(0x408a001404801040ULL),
    (Bitboard(0x800800004008200ULL) << 64) | Bitboard(0x42008500b11260c0ULL),
    (Bitboard(0x10041000440080ULL) << 64) | Bitboard(0x8000040220200000ULL),
    (Bitboard(0x40100800006180ULL) << 64) | Bitboard(0x90000809080201ULL),
    (Bitboard(0x201001000010ULL) << 64) | Bitboard(0x9020004840000428ULL),
    (Bitboard(0x2402012000880380ULL) << 64) | Bitboard(0x2000010089308020ULL),
    (Bitboard(0x6a085000204001ULL) << 64) | Bitboard(0x44000035100005ULL),
    (Bitboard(0x12000800100002ULL) << 64) | Bitboard(0x8006000200000600ULL),
    (Bitboard(0xa020210004108020ULL) << 64) | Bitboard(0x4002004100000488ULL),
    (Bitboard(0x101048000040990ULL) << 64) | Bitboard(0x1202840001000080ULL),
    (Bitboard(0x100004000201401ULL) << 64) | Bitboard(0x41100c002c4210ULL),
    (Bitboard(0x6051221018001081ULL) << 64) | Bitboard(0x2040001019003800ULL),
    (Bitboard(0x8000680084004100ULL) << 64) | Bitboard(0x50000000000040ULL),
    (Bitboard(0xc00011008004080ULL) << 64) | Bitboard(0x10000040008106ULL),
    (Bitboard(0x8007011008008000ULL) << 64) | Bitboard(0x1000010005000444ULL),
    (Bitboard(0x4010008004000ULL) << 64) | Bitboard(0xc280010002109000ULL),
    (Bitboard(0x40c00010004008ULL) << 64) | Bitboard(0x1a44000402000022ULL),
    (Bitboard(0x100800420002020ULL) << 64) | Bitboard(0x48a024010088020ULL),
    (Bitboard(0x400010000220ULL) << 64) | Bitboard(0x8200010798000110ULL),
    (Bitboard(0x6004400520000040ULL) << 64) | Bitboard(0x810141000021c913ULL),
    (Bitboard(0x12053a0481040001ULL) << 64) | Bitboard(0x140004010200888ULL),
    (Bitboard(0x8802100200020000ULL) << 64) | Bitboard(0x102000030304c100ULL),
    (Bitboard(0x200400040028ULL) << 64) | Bitboard(0x20000620000082a0ULL),
    (Bitboard(0x4211010200040019ULL) << 64) | Bitboard(0x18000000000000ULL),
    (Bitboard(0x1000038100040010ULL) << 64) | Bitboard(0x1400000064000ULL),
    (Bitboard(0x809000500200210ULL) << 64) | Bitboard(0x20080042260040ULL),
    (Bitboard(0x500200410140004ULL) << 64) | Bitboard(0x200000600c012ULL),
    (Bitboard(0x1200002004600041ULL) << 64) | Bitboard(0x208020000105020ULL),
    (Bitboard(0x80188050100001ULL) << 64) | Bitboard(0x890101080000a04ULL),
    (Bitboard(0x88880002c200ULL) << 64) | Bitboard(0x11406100000024ULL),
    (Bitboard(0x8c0080085000300ULL) << 64) | Bitboard(0x18200000000804ULL),
    (Bitboard(0x21880001000200ULL) << 64) | Bitboard(0x1044401008080008ULL),
    (Bitboard(0x48000808800100ULL) << 64) | Bitboard(0x484000040080001ULL),
    (Bitboard(0x200040800200ULL) << 64) | Bitboard(0x800008008220416ULL),
    (Bitboard(0x21400080020400ULL) << 64) | Bitboard(0x401040008200e40ULL),
    (Bitboard(0x20222004a0002200ULL) << 64) | Bitboard(0x702000950040042ULL),
    (Bitboard(0x800040020800ULL) << 64) | Bitboard(0x84004000200260ULL),
    (Bitboard(0x101021005090800ULL) << 64) | Bitboard(0x41810200000008ULL),
    (Bitboard(0x200008008100cfULL) << 64) | Bitboard(0x40a810003000ULL),
    (Bitboard(0x100048400020001ULL) << 64) | Bitboard(0x8c01208248024ULL),
    (Bitboard(0x240c0000410001ULL) << 64) | Bitboard(0x8400400200440ULL),
    (Bitboard(0x8400110408002ULL) << 64) | Bitboard(0x6100004800020ULL),
    (Bitboard(0x81080c900180000dULL) << 64) | Bitboard(0x4000020005580ULL),
    (Bitboard(0xa10400100101002ULL) << 64) | Bitboard(0x400080200021cULL),
    (Bitboard(0x6004400040002002ULL) << 64) | Bitboard(0x408c44044400ULL),
    (Bitboard(0x698600114700005ULL) << 64) | Bitboard(0x8004a2000000ULL),
    (Bitboard(0x10810c808808414ULL) << 64) | Bitboard(0x2000801800100ULL),
    (Bitboard(0xc0085228020008ULL) << 64) | Bitboard(0x1080000003000000ULL),
    (Bitboard(0x40091400008a0880ULL) << 64) | Bitboard(0x40000000000c20ULL),
    (Bitboard(0x8000420400020ULL) << 64) | Bitboard(0x20008040000000ULL),
    (Bitboard(0x401840000801400ULL) << 64) | Bitboard(0x4100020230440109ULL),
    (Bitboard(0x20201100001010ULL) << 64) | Bitboard(0x80008080000002ULL),
    (Bitboard(0x200140012000ULL) << 64) | Bitboard(0x280004000080200ULL),
    (Bitboard(0x4040014000022cULL) << 64) | Bitboard(0x900020d00000080ULL),
    (Bitboard(0xa218400020000101ULL) << 64) | Bitboard(0x4100010420041000ULL),
    (Bitboard(0x2000002004041044ULL) << 64) | Bitboard(0x420003000c010000ULL),
    (Bitboard(0x60000a204100ULL) << 64) | Bitboard(0x10400002001001ULL),
    (Bitboard(0x2000840108080780ULL) << 64) | Bitboard(0x8000800080000082ULL),
    (Bitboard(0x8411010400208000ULL) << 64) | Bitboard(0x1080400000220020ULL),
    (Bitboard(0x4c0000a10000a203ULL) << 64) | Bitboard(0x6000400040200023ULL),
    (Bitboard(0x1800282021320ULL) << 64) | Bitboard(0x2049000100804000ULL),
    (Bitboard(0x10c00104400108ULL) << 64) | Bitboard(0x6e00800090280100ULL),
    (Bitboard(0x201200020008408ULL) << 64) | Bitboard(0x124000800100b2ULL),
    (Bitboard(0x1880004009800110ULL) << 64) | Bitboard(0x112000022004000ULL),
    (Bitboard(0xa802000100022c0ULL) << 64) | Bitboard(0x40404000083091a2ULL),
    (Bitboard(0x440000284000521ULL) << 64) | Bitboard(0xa02000b000200010ULL),
    (Bitboard(0x4100100010408000ULL) << 64) | Bitboard(0x4000245000800011ULL),
    (Bitboard(0xc400020800480080ULL) << 64) | Bitboard(0x110414000000000ULL),
    (Bitboard(0x424c8081000004ULL) << 64) | Bitboard(0x9000402000100000ULL),
    (Bitboard(0x48983100002000ULL) << 64) | Bitboard(0x480016000080180ULL),
    (Bitboard(0x84002008a0400002ULL) << 64) | Bitboard(0x40004a000008008ULL),
    (Bitboard(0x2000c0004184ULL) << 64) | Bitboard(0x802000000208ULL),
    (Bitboard(0x806044080014001ULL) << 64) | Bitboard(0x441850000800020ULL),
    (Bitboard(0x24b0880a10040102ULL) << 64) | Bitboard(0x42ba018000000b00ULL),
};